MODULE RomanInvoice;

REQUIRE System,
        Stock,
        Store,
        I18n,
        LegalEntity,
        Barcode,
        RetailCRM,
        AccountDocument,
        Employee,
        UserPriceChange,
        Contract,
        Supplier,
        Warehouse,
        RomanLogicsModule;

PRIORITY Stock, LegalEntity, Store, RomanLogicsModule;

changeNameSkuLanguageInvoice = ACTION (sku, invoice) {
    REQUEST STRING[50] INPUT;
    SET translateNameSkuLanguage(sku, language) IF language == languageInvoice(invoice) <- requestedString();
}

changeMainCompositionSkuLanguageInvoice = ACTION (sku, invoice) {
    REQUEST STRING[200] INPUT;
    SET mainCompositionSkuLanguage(sku, language) IF language == languageInvoice(invoice) <- requestedString();
}

changeAdditionalCompositionSkuLanguageInvoice = ACTION (sku, invoice) {
    REQUEST STRING[200] INPUT;
    SET additionalCompositionSkuLanguage(sku, language) IF language == languageInvoice(invoice) <- requestedString();
}

EXTEND FORM boxInvoiceForm
    PROPERTIES (invoice) READONLY nameLanguageInvoice AFTER nameDestinationDestinationDocument
    PROPERTIES (sku) originalNameArticleSku, translateNameArticleSku, translationNameSku, translationInvoiceName
    PROPERTIES (sku, invoice) translateNameSkuInvoice ON CHANGE EXEC changeNameSkuLanguageInvoice(sku, invoice) SHOWIF languageInvoice(invoice),
                              translationNameSkuInvoice SHOWIF languageInvoice(invoice), translationInvoiceLanguageName SHOWIF languageInvoice(invoice)


    PROPERTIES (sku) mainCompositionOriginSku, mainCompositionSku, translationMainCompositionSku, translationInvoiceMainComposition
    PROPERTIES (sku, invoice) mainCompositionSkuInvoice ON CHANGE EXEC changeMainCompositionSkuLanguageInvoice(sku, invoice) SHOWIF languageInvoice(invoice),
                              translationMainCompositionSkuInvoice SHOWIF languageInvoice(invoice), translationInvoiceLanguageMainComposition SHOWIF languageInvoice(invoice)


    PROPERTIES (sku) additionalCompositionOriginSku, additionalCompositionSku, translationAdditionalCompositionSku, translationInvoiceAdditionalComposition
    PROPERTIES (sku, invoice) additionalCompositionSkuInvoice ON CHANGE EXEC changeAdditionalCompositionSkuLanguageInvoice(sku, invoice) SHOWIF languageInvoice(invoice),
                              translationAdditionalCompositionSkuInvoice SHOWIF languageInvoice(invoice), translationInvoiceLanguageAdditionalComposition SHOWIF languageInvoice(invoice)
;

EXTEND FORM simpleInvoiceForm
    PROPERTIES (invoice) READONLY nameLanguageInvoice AFTER nameDestinationDestinationDocument
;