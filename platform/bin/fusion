##!/bin/sh
# chkconfig: 2345 99 50
# description: fusion management script
#
# Adapt the following lines to your configuration
FUSION_HOME=/usr/local/fusion
JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre
FUSION_IP=174.129.46.47
PID_FILE=/var/run/jsvc-fusion.pid

FUSION_OPTS="-Xms512m -Xmx2048m"

CLASSPATH=/usr/local/fusion/fusion-prod.jar

cd $FUSION_HOME

case "$1" in
  start)
    /usr/bin/jsvc \
    -home $JAVA_HOME \
    -jvm server \
    -Djava.rmi.server.hostname=$FUSION_IP \
    -pidfile $PID_FILE \
    -outfile $FUSION_HOME/logs/stdout.log \
    -errfile $FUSION_HOME/logs/stderr.log \
    $FUSION_OPTS \
    -cp $CLASSPATH \
    platform.server.logics.BusinessLogicsBootstrap
    exit $?
    ;;

  stop)
    /usr/bin/jsvc \
    -home $JAVA_HOME \
    -stop \
    -pidfile $PID_FILE \
    platform.server.logics.BusinessLogicsBootstrap
    exit $?
    ;;

  *)
    echo "Usage fusion.sh start/stop"
    exit 1;;
esac
