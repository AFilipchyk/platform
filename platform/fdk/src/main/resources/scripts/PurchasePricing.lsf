MODULE PurchasePricing;

REQUIRE Pricing, PurchaseInvoice, Repricing, PurchaseShipment;

NAMESPACE Purchase;

//----------------------------------------------- Акт расценки ---------------------------------------------------//

@definePricingAggregation(invoice, ' (покупка)', 'Акт расценки на основе инвойса', supplier, 'Поставщик');
@definePricingRelation(' (покупка)', supplier, 'Поставщик');

@defineRepricing(' (покупка)');

overShipmentPriceUserInvoiceDetail(detail) += retailPriceUserInvoiceDetail(detail)
    IF stockUserInvoiceDetail(detail) IS departmentStore AND NOT costLedgerDepartmentStore(stockUserInvoiceDetail(detail));

//-- аггр.объект

@deriveDocumentDetailPriceMarkupCustomPrefix(userInvoiceDetail, retail);
retailVATUserInvoiceDetail (detail) <- VATUserInvoiceDetail(detail) WHEN ASSIGNED(VATUserInvoiceDetail(detail));

