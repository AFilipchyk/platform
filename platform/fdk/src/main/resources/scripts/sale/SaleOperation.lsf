MODULE SaleOperation;

REQUIRE Operation, PriceList, Sale;

NAMESPACE Sale;

@defineOperation('(продажа)');

@defineOperationPriceListType();
@defineOperationLegalEntity(supplier, s, isCompanyLegalEntity, 'Поставщики');
@defineOperationLegalEntity(customer, c, isBuyerLegalEntity, 'Покупатели');

createShipmentOperation 'Создавать поставку' = DATA BOOLEAN (operation) IN createGroup;
createPricingOperation 'Создавать акт расценки' = DATA BOOLEAN (operation) IN createGroup;
createCreditNoteOperation 'Создавать акт расхождения' = DATA BOOLEAN (operation) IN createGroup;
createPurchaseInvoiceOperation 'Создавать накладную(закупка)' = DATA BOOLEAN (operation) IN createGroup;
createPurchasePricingOperation 'Создавать акт расценки(закупка)' = DATA BOOLEAN (operation) IN createGroup;
purchaseRetailPriceListTypeOperation = DATA priceListType (operation);
namePurchaseRetailPriceListTypeOperation 'Вид цен акт расценки(закупка)' (operation) = name(purchaseRetailPriceListTypeOperation(operation));

EXTEND FORM operation
    PROPERTIES(o) createShipmentOperation, createPricingOperation, createCreditNoteOperation,
                  createPurchaseInvoiceOperation, createPurchasePricingOperation, namePurchaseRetailPriceListTypeOperation
;

EXTEND DESIGN operation{
    tabContainer{
        NEW aggrContainer{
            caption = 'Создание объектов';
            ADD PROPERTY(createShipmentOperation);
            ADD PROPERTY(createCreditNoteOperation);
            ADD PROPERTY(createPricingOperation);
            ADD PROPERTY(createPurchaseInvoiceOperation);
            ADD PROPERTY(createPurchasePricingOperation);
            ADD PROPERTY(namePurchaseRetailPriceListTypeOperation);
        }
    }
}

NAVIGATOR {
    saleMasterData {
        ADD operations;
    }
}
