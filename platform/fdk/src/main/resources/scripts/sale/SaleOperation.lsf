MODULE SaleOperation;

REQUIRE Operation, PriceList, Sale;

NAMESPACE Sale;

@defineOperation(sale, '(продажа)');

@defineOperationPriceListType(sale);
@defineOperationLegalEntity(sale, supplier, s, isCompanyLegalEntity, 'Поставщики');
@defineOperationLegalEntity(sale, customer, c, isBuyerLegalEntity, 'Покупатели');

createShipmentSaleOperation 'Создавать поставку' = DATA BOOLEAN (saleOperation) IN createGroup;
createPricingSaleOperation 'Создавать акт расценки' = DATA BOOLEAN (saleOperation) IN createGroup;
createCreditNoteSaleOperation 'Создавать акт расхождения' = DATA BOOLEAN (saleOperation) IN createGroup;
createPurchaseInvoiceSaleOperation 'Создавать накладную(закупка)' = DATA BOOLEAN (saleOperation) IN createGroup;
createPurchasePricingSaleOperation 'Создавать акт расценки(закупка)' = DATA BOOLEAN (saleOperation) IN createGroup;

EXTEND FORM saleOperation
    PROPERTIES(o) createShipmentSaleOperation, createPricingSaleOperation, createCreditNoteSaleOperation,
                  createPurchaseInvoiceSaleOperation, createPurchasePricingSaleOperation
;

EXTEND DESIGN saleOperation{
    tabContainer{
        NEW aggrContainer{
            caption = 'Создание объектов';
            ADD PROPERTY(createShipmentSaleOperation);
            ADD PROPERTY(createCreditNoteSaleOperation);
            ADD PROPERTY(createPricingSaleOperation);
            ADD PROPERTY(createPurchaseInvoiceSaleOperation);
            ADD PROPERTY(createPurchasePricingSaleOperation);
        }
    }
}

NAVIGATOR {
    saleMasterData {
        ADD saleOperations;
    }
}
