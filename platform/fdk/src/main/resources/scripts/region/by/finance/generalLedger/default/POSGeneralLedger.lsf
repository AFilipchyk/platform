MODULE POSGeneralLedger;

REQUIRE GeneralLedger, POS, DimensionStock;

//------------------- Реализация через кассы --------------------//

EXTEND CLASS Receipt : GeneralLedger.GLDocument;
nameGLDocument(document) += descriptionReceipt(document);

//------------------- Розничная сумма --------------------//
companyReceipt (receipt) = legalEntityStore(storeDepartmentStore(departmentStoreReceipt(receipt)));
@defineGeneralLedgerAggregation (receipt,                     // основание (объект, документ..)
                                 POS,                         // префикс для проводки (для того, чтобы не пересекались по названию)
                                 company,                     // копмания проводки
                                 sumReceiptDetailReceipt,     // сумма проводки
                                 descriptionReceipt,          // описание документа
                                 '90.1',                      // дебет счета
                                 '41.2',                      // кредит счета
                                 '1'                          // идентификатор плана счетов
                                 );
creditGeneralLedgerDimensionType(generalLedger,dimensionType) += departmentStoreReceipt(receiptPOSGeneralLedger(generalLedger)) WHEN CLASS(receiptPOSGeneralLedger(generalLedger)) AND dimensionType == DimensionType.stock;