MODULE ItemDescription;

REQUIRE System, Item;

NAMESPACE Item;

GROUP itemDescriptionGroup 'Описание' : public;

// Вид
CLASS Type 'Вид товара';
TABLE type(Type);

nameType 'Наименование' = DATA ISTRING[50](Type);

@defineObjectItemAttribute(type, nameType, 'Вид', itemDescriptionGroup);
@defineObjectItemAttributeBatch (type, nameType, 'Вид');

// Сорт
CLASS Sort 'Сорт товара';
TABLE sort(Sort);

nameSort 'Наименование' = DATA ISTRING[50](Sort);

@defineObjectItemAttribute(sort, nameSort, 'Сорт', itemDescriptionGroup);
@defineObjectItemAttributeBatch (sort, nameSort, 'Сорт');

// Форма
CLASS Form 'Форма товара';
TABLE form(Form);

nameForm 'Наименование' = DATA ISTRING[50](Form);

@defineObjectItemAttribute(form, nameForm, 'Форма', itemDescriptionGroup);
@defineObjectItemAttributeBatch (form, nameForm, 'Форма');

// Особенность
CLASS Feature 'Особенность товара';
TABLE feature(Feature);

nameFeature 'Наименование' = DATA ISTRING[50](Feature);
shortNameFeature 'Краткое наименование' = DATA ISTRING[50](Feature);

@defineObjectItemAttribute(feature, nameFeature, 'Особенность', itemDescriptionGroup);
@defineObjectItemAttributeBatch (feature, nameFeature, 'Особенность');
//@implementObjectShortItemAttribute(feature, 'Особенность (сокр.)');

// Упаковка
CLASS Pack 'Упаковка';
TABLE pack(Pack);

namePack 'Наименование' = DATA ISTRING[50](Pack);
shortNamePack 'Наименование' = DATA ISTRING[10](Pack);

@defineObjectItemAttribute(pack, namePack, 'Упаковка', itemDescriptionGroup);
@defineObjectItemAttributeBatch (pack, namePack, 'Упаковка');
//@implementObjectShortItemAttribute(pack, 'Упаковка (сокр.)');

// Свойство
@defineStringItemAttribute(property, STRING[100], 'Свойство', itemDescriptionGroup);
@defineItemAttributeBatch (property, 'Свойство');

// Кол-во компонентов
@defineIntegerItemAttribute(numberComponents, 'Кол-во компонентов', itemDescriptionGroup);
@defineItemAttributeBatch (numberComponents, 'Кол-во компонентов');

overCopyItem(s, d) += ACTION (s, d) {
    SET typeItem(d) <- typeItem(s);
    SET sortItem(d) <- sortItem(s);
    SET formItem(d) <- formItem(s);
    SET featureItem(d) <- featureItem(s);
    SET packItem(d) <- packItem(s);
    SET propertyItem(d) <- propertyItem(s);
    SET numberComponentsItem(d) <- numberComponentsItem(s);
}


EXTEND DESIGN item { itemPrimaryColumn1 { ADD i.itemDescriptionGroup; } }

